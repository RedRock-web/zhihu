<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>知乎 - 有问题，上知乎</title>
    <link href="../image/apple-touch-icon-152.67c7b278.png" rel="shortcut icon" type="photo" sizes="any">
    <link rel="stylesheet" type="text/css" href="./sign_in.css">

</head>

<body>
    <div>
        <img class="head_photo" src="../image/v2-a47051e92cf74930bedd7469978e6c08_hd.png">
    </div>
    <div id="center">
        <div class="log_in">
            <a id="password1" onclick="nonecord()">免密码登录</a>
            <a id="password2" onclick="cord()">密码登录</a>
        </div>
        <img src="../image/image.png" class="code">
        <form id="box1">
            <div class="number1">
                <input name="username" value="" placeholder="手机号或邮箱" id="number" autocomplete="off" onblur="check()">
            </div>
            <hr>
            <div class="security_code">
                <input name="password" type="" id="note" placeholder="密码" autocomplete="off" onblur="check_note()">
            </div>
            <hr>
            <input placeholder="验证码" class="code1">
            <hr>
            <span class="overseas">海外手机号登录</span>
            <a href="https://www.zhihu.com/account/password_reset" class="forget">忘记密码？</a>
            <div class="button_in">
                <input type="button" id="button" value="登录/注册">
            </div>
        </form>
        <form id="box2">
            <input name="conutry" value="" placeholder="中国+86" class="conutry" autocomplete="off">
            <input name="phone" value="" placeholder="手机号" class="phone" autocomplete="off">
            <hr>
            <input name="cord" value="" placeholder="输入六位短信验证码" class="cord" autocomplete="off">
            <a href="" class="get">获取短信验证码</a>
            <hr>
            <a href="" class="voice">获取语音验证码</a>
        </form>
        <div class="explain">
            <div class="explain_left">
                <span>未注册手机验证后自动登录</span>
                <br>
                <span>注册即代表同意</span>
                <a href="https://www.zhihu.com/terms">《知乎协议》</a>
                <a href="https://www.zhihu.com/term/privacy">《隐私保护指引》</a>

            </div>
            <a class="explain_right" href="https://www.zhihu.com/org/signup">注册机构号</a>
        </div>
    </div>
    <div class="center_bottom">
        <div class="method">
            <span class="login">社交账号登陆</span>
            <div class="other_mothod">
                <a href="https://open.weixin.qq.com/connect/qrconnect?appid=wx268fcfe924dcb171&redirect_uri=https%3A%2F%2Fwww.zhihu.com%2Foauth%2Fcallback%2Fwechat%3Faction%3Dlogin%26from%3D&response_type=code&scope=snsapi_login&state=636f646d32765348436158496a764c4368766a394b78657a43344a536d646e54#wechat"
                    class="h1">微信</a>
                <a href="https://graph.qq.com/oauth2.0/show?which=Login&display=pc&scope=get_user_info%2Cget_info%2Cadd_t%2Cadd_pic_t%2Cget_other_info%2Cget_fanslist%2Cget_idollist%2Cadd_idol%2Cadd_share&state=636f646d32765348436158496a764c4368766a394b78657a43344a536d646e54&redirect_uri=https%3A%2F%2Fwww.zhihu.com%2Foauth%2Fcallback%2Fqqconn%3Faction%3Dlogin%26from%3D&response_type=code&client_id=100490701"
                    class="h1">QQ</a>
                <a href="636f646d32765348436158496a764c4368766a394b78657a43344a536d646e54" class="h1">微博</a>
            </div>
        </div>
    </div>
    <div class="buttom">
        <div class="word">
            <a href=""><img src="../image/favicon.png" class="sign"></a>
            <a href="" class="link">下载知乎APP</a>
        </div>
    </div>
    <div class="buttom1">
        <a href="https://zhuanlan.zhihu.com/">知乎专栏</a>
        <a href="https://www.zhihu.com/roundtable">圆桌</a>
        <a href="https://www.zhihu.com/explore">发现</a>
        <a href="https://www.zhihu.com/app">移动应用</a>
        <a href="https://www.zhihu.com/contact">联系我们</a>
        <a href="https://app.mokahr.com/apply/zhihu">来知乎工作</a>
        <a href="https://www.zhihu.com/org/signup">注册机构号</a><br>
        <span>@2020知乎</span>
        <a href="https://tsm.miit.gov.cn/dxxzsp/">京ICP证110745号</a>
        <img src="../image/v2-d0289dc0a46fc5b15b3363ffa78cf6c7.png" class="badge">
        <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010802020088">京公网安备 11010802010035 号</a>
        <a href="https://zhstatic.zhihu.com/assets/zhihu/publish-license.jpg">出版物经营许可证</a><br>
        <a href="https://zhuanlan.zhihu.com/p/51068775">侵权举报</a>
        <a href="http://www.12377.cn/">网上有害信息举报专区</a>
        <a href="https://www.zhihu.com/jubao">儿童色情信息举报专区</a>
        <span>违法和不良信息举报：010-82716601</span>
    </div>
    <script>
            var box1 = document.getElementById('box1')
            var box2 = document.getElementById('box2')
            var passWord1 = document.getElementById('password1')
            var passWord2 = document.getElementById('password2')
        function nonecord(){
            if(box1.style.display = 'block'){
                box1.style.display = 'none'
                box2.style.display = 'block'
            }
            passWord1.style.fontWeight = '600'
            passWord2.style.fontWeight = '400'
        }
        function cord(){
            if(box2.style.display = 'block'){
                box2.style.display = 'none'
                box1.style.display = 'block'
            }
                passWord2.style.fontWeight = '600'
                passWord1.style.fontWeight = '400'

        }
        var user = document.getElementById("number")
        var pwd = document.getElementById("note")
        function check() {
            if (user.value == "") {
                alert("用户名不能为空")
            }
        }
        function check_note() {
            if (pwd.value == "") {
                alert("密码不能为空")
            } else if (pwd.value.length < 6) {
                alert("密码不能小于六位")
            }
        }
        var userName = document.getElementById('number');
        var passWord = document.getElementById('note');
        var btn = document.getElementById('button')
        btn.onclick =function(){
        function ajax(options){
            var defaults = {
                type:'post',
                url:'',
                async:true,
                data:{},
                headers:{
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                success:function(){},
                error:function(){}
            };
            Object.assign(defaults,options);
            var xhr = new XMLHttpRequest();
            var params = '';
            for(var attr in defaults.data){
                params += attr + '=' + defaults.data[attr]+'&';
            }
            params = params.substr(0,params.length-1);
            if(defaults.type=='get'){
                defaults.url = defaults.url + '?' + params;
            }
            xhr.open(defaults.type,defaults.url);  
            // xhr.withCredentials = true;
            if(defaults.type == 'post'){
                var contentType =  defaults.headers['Content-Type']
                xhr.setRequestHeader('Content-Type',contentType)
                if(contentType == 'application/json'){
                    xhr.send(JSON.stringify(defaults.data));
                }else{
                    xhr.send(params);
                }
                
            }else{
                xhr.send();
            }
          
            xhr.onload=function(){
                var contentType = xhr.getResponseHeader('Content-type');
                var responseText = xhr.responseText;
                if(contentType.includes('application/json')){
                   responseText = JSON.parse(responseText);
                }
                if(xhr.status == 200){
                   defaults.success(responseText); 
                   console.log(responseText);
                   window.location.href='D:/GIT2/RedRock-web/web/home_page/page/page.html'
                }else{
                    defaults.error(responseText,xhr);
                }
                
            }
        }
        ajax({
            type:'post',
            url:'http://47.98.57.152:8080/sign_in',
            async:true,
            data:{
                username:userName.value,
                password:passWord.value
            },
            headers:{
                'Content-Type':'application/x-www-form-urlencoded;charset = UTF-8',
            },
            success:function(data){
                console.log(data);
            },
            error:function(data){
                console.log(data);
            }
        })

        }
    </script>
</body>

</html>